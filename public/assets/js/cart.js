function disableAllButtons(){let e=document.querySelectorAll(".cart-remove");e.forEach(e=>{e.disabled=!0,setTimeout(()=>{e.disabled=!1},500)})}function add(e,t){disableAllButtons(),fetch(e,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(e=>{if(e.ok)return e.json();throw Error("La requ\xeate a \xe9chou\xe9 : "+e.status)}).then(e=>{if(e.nouvelleQuantite>1){let a=document.getElementById(t),l=a.querySelector("#quantity");l.textContent="Qt :"+e.nouvelleQuantite;let d=document.getElementById("total");d.textContent=calculerPrixTotal()+" €"}else fetch("/api/article/details/"+t).then(e=>{if(!e.ok)throw Error("The request has failed : "+e.status);return e.json()}).then(e=>{let t=document.createElement("div");t.classList.add("cart-box"),t.id=e.data.article.id;let a=document.createElement("a");a.href="#";let l=document.createElement("img");l.src="/storage/"+e.data.image_path,l.alt="",l.classList.add("cart-img"),a.appendChild(l),t.appendChild(a);let d=document.createElement("div");d.classList.add("detail-box");let r=document.createElement("div");r.classList.add("cart-product-title"),r.textContent=e.data.article.name,d.appendChild(r);let n=document.createElement("div");n.classList.add("cart-price"),n.textContent=e.data.article.price+" €",d.appendChild(n);let i=document.createElement("div");i.id="quantity",i.classList.add("cart-price"),i.textContent="Qt : 1",d.appendChild(i),t.appendChild(d);let c=document.createElement("div");c.classList.add("btns");let s=document.createElement("button");s.classList.add("cart-remove"),s.name="rm",s.onclick=()=>add("/cart/addItem/"+e.data.article.id,e.data.article.id);let o=document.createElement("i");o.classList.add("bi","bi-plus"),s.appendChild(o),c.appendChild(s);let h=document.createElement("button");h.classList.add("cart-remove"),h.name="rm",h.onclick=()=>remove("/cart/removeItem/"+e.data.article.id,e.data.article.id);let m=document.createElement("i");m.classList.add("bi","bi-dash"),h.appendChild(m),c.appendChild(h);let u=document.createElement("button");u.classList.add("cart-remove"),u.name="rm",u.onclick=()=>deleteItem("/cart/deleteItem/"+e.data.article.id,e.data.article.id);let p=document.createElement("i");p.classList.add("bi","bi-trash3"),u.appendChild(p),c.appendChild(u),t.appendChild(c);let E=document.querySelector(".cart-content");E.appendChild(t);let C=document.getElementById("total");C.textContent=calculerPrixTotal()+" €",new swal({title:"The article has been added to the cart."})}).catch(e=>{console.error("The request has failed :",e)})}).catch(e=>{console.error("The request has failed :",e)})}function remove(e,t){disableAllButtons(),fetch(e,{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(e=>{e.ok?e.json().then(e=>{let a=document.getElementById(t),l=a.querySelector("#quantity");l.textContent="Qt :"+e.nouvelleQuantite;let d=document.getElementById("total");d.textContent=calculerPrixTotal()+" €"}):console.error("The request has failed :",e.status)}).catch(e=>{console.error("The request has failed :",e)})}function deleteItem(e,t){disableAllButtons(),fetch(e,{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(e=>{if(e.ok){document.getElementById(t).remove();let a=document.getElementById("total");a.textContent=calculerPrixTotal()+" €"}else console.error("The request has failed :",e.status)}).catch(e=>{console.error("The request has failed :",e)})}